<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <title>Newsletter - Padr√µes de Projeto</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      background: #f5f5f5;
    }

    h1, h2 {
      color: #333;
    }

    .container {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 20px;
    }

    .box {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      background: white;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
    }

    input {
      padding: 8px 0px 8px 4px;
      margin: 5px 0;
      width: 300px;
      border-radius: 8px;
    }

    button {
      padding: 8px;
      width: 300px;
      border-radius: 8px;
    }

    .assinante, .mensagem {
      padding: 5px;
      border-bottom: 1px solid #ddd;
    }

    .mensagem {
      font-style: italic;
    }
  </style>
</head>
<body>
  <h1>üìß Newsletter - Exemplo de Padr√µes de Projeto</h1>
  
  <div class="container">
    <!-- Cadastro -->
    <div class="box">
      <h2>Cadastrar Usu√°rio</h2>
      <input type="text" id="nome" placeholder="Nome">
      <input type="email" id="email" placeholder="E-mail">
      <button onclick="controller.cadastrar()">Cadastrar</button>
    </div>

    <!-- Enviar Newsletter -->
    <div class="box">
      <h2>Enviar Mensagem</h2>
      <input type="text" id="mensagem" placeholder="Mensagem da newsletter">
      <button onclick="controller.enviarMensagem()">Enviar</button>
    </div>

    <!-- Lista de Assinantes -->
    <div class="box">
      <h2>Assinantes</h2>
      <div id="assinantes"></div>
    </div>

    <!-- Hist√≥rico de Mensagens -->
    <div class="box">
      <h2>Mensagens</h2>
      <div id="mensagens"></div>
    </div>
  </div>

  <script>
    // ===== MODEL =====
    class Usuario {
      constructor(nome, email) {
        this.nome = nome;
        this.email = email;
      }
    }

    class Newsletter {
      constructor() {
        this.assinantes = [];
        this.mensagens = [];
      }

      adicionar(usuario) {
        this.assinantes.push(usuario);
      }

      notificar(mensagem) {
        this.mensagens.push(mensagem);
        this.assinantes.forEach(u =>
          console.log(`üì® Email enviado para ${u.email}: ${mensagem}`)
        );
      }
    }

    // ===== FACTORY METHOD =====
    function usuarioFactory(nome, email) {
      return new Usuario(nome, email);
    }

    // ===== VIEW =====
    const view = {
      mostrarAssinantes(assinantes) {
        const div = document.getElementById("assinantes");
        div.innerHTML = "";
        assinantes.forEach(u => {
          const p = document.createElement("p");
          p.className = "assinante";
          p.textContent = `${u.nome} (${u.email})`;
          div.appendChild(p);
        });
      },
      mostrarMensagens(mensagens) {
        const div = document.getElementById("mensagens");
        div.innerHTML = "";
        mensagens.forEach(m => {
          const p = document.createElement("p");
          p.className = "mensagem";
          p.textContent = m;
          div.appendChild(p);
        });
      }
    };

    // ===== CONTROLLER =====
    const newsletter = new Newsletter();
    const controller = {
      cadastrar() {
        const nome = document.getElementById("nome").value;
        const email = document.getElementById("email").value;
        if (nome && email) {
          const usuario = usuarioFactory(nome, email);
          newsletter.adicionar(usuario);
          view.mostrarAssinantes(newsletter.assinantes);
        } else {
          alert("Preencha nome e e-mail!");
        }
      },
      enviarMensagem() {
        const msg = document.getElementById("mensagem").value;
        if (msg) {
          newsletter.notificar(msg);
          view.mostrarMensagens(newsletter.mensagens);
        } else {
          alert("Digite uma mensagem!");
        }
      }
    };
  </script>
</body>
</html>
